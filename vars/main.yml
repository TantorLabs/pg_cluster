---
# vars file for pg_cluster

pg_apt_key_url: "https://public.tantorlabs.ru/tantorlabs.ru.asc"
pg_apt_repo: "deb [arch=amd64] https://USERNAME:PASSWORD@nexus.tantorlabs.ru/repository/astra-smolensk-1.7 smolensk main"
patroni_apt_key_url: "https://www.postgresql.org/media/keys/ACCC4CF8.asc"
patroni_apt_repo: "deb http://apt.postgresql.org/pub/repos/apt buster-pgdg main"


patroni_pg_data_dir: "/var/lib/postgresql/tantor-se-server-{{ patroni_pg_version }}/{{ patroni_scope }}"
patroni_pg_config_dir: "/var/lib/postgresql/tantor-se-server-{{ patroni_pg_version }}/{{ patroni_scope }}"
patroni_pg_bin_dir: "/opt/tantor/db/{{ patroni_pg_version }}/bin"
patroni_pg_pgpass: /var/lib/postgresql/.pgpass
patroni_bin_dir: /usr/bin

patroni_pg_packages:
  - { name: "tantor-se-server-{{ patroni_pg_version }}",            state: "present" }

patroni_system_packages:
  - { name: "python3-psycopg2", state: "present" }
  - { name: "python3-pip",      state: "present" }
  - { name: "jq",               state: "present" }

# Cluster variables
cluster_vip_1: "10.128.0.197"
cluster_vip_2: "10.128.0.198"
cluster_vip_3: "10.128.0.199"  # ip address for client access to databases in the cluster (optional)
vip_interface: "{{ ansible_default_ipv4.interface }}"  # interface name (ex. "ens32")
